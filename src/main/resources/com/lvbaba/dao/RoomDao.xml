<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lvbaba.dao.RoomDao">

    <insert id="insertRoom" parameterType="Room">
        INSERT INTO room(h_id,r_number,p_limit) VALUES (#{hId},#{rNumber},#{pLimit});
    </insert>

    <update id="updateRoom" parameterType="Room">
        UPDATE room SET
        <if test="hId!=null and hId!=''">
            h_id = #{hId},
        </if>
        <if test="rNumber!=null and rNumber!=''">
            r_number = #{rNumber},
        </if>
        <if test="pLimit!=null and pLimit!=''">
            p_limit = #{pLimit}
        </if>
        where r_id = #{rId}
    </update>

    <delete id="deleteRoom" parameterType="Room">
        DELETE FROM room WHERE r_id = #{rId};
    </delete>

    <select id="queryOne" parameterType="Room" resultMap="roomMap">
        SELECT r_id,h_id,r_number,p_limit FROM room WHERE r_id = #{rId};
    </select>

    <select id="query" parameterType="Room" resultMap="roomMap">
        SELECT r_id,h_id,r_number,p_limit FROM room
        <where>
            <if test="rId!=null and rId!=''">
                r_id = #{rId}
            </if>
            <if test="hId!=null and hId!=''">
                and h_id = #{hId}
            </if>
            <if test="rNumber!=null and rNumber!=''">
                and r_number = #{rNumber}
            </if>
            <if test="pLimit!=null and pLimit!=''">
                and p_limit = #{pLimit}
            </if>
        </where>
    </select>

    <resultMap id="roomMap" type="Room">
        <id property="rId" column="r_id"/>
        <result property="hId" column="h_id"/>
        <result property="rNumber" column="r_number"/>
        <result property="pLimit" column="p_limit"/>
    </resultMap>
</mapper>