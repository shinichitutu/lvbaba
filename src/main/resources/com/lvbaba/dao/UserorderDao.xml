<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lvbaba.dao.UserorderDao">

    <insert id="insertUserorder" parameterType="Userorder">
        INSERT INTO userorder(u_id,t_id,o_price,o_status,o_time,p_time) VALUES (#{uId},#{tId},#{oPrice},#{oStatus},#{oTime},#{pTime});
    </insert>
    <update id="updateUserorder" parameterType="Userorder">
        UPDATE userorder SET
        <if test="uId!=null and uId!=''">
            u_id =#{uId},
        </if>
        <if test="tId!=null and uId!=''">
            t_id = #{tId},
        </if>
        <if test="oPrice!=null and oPrice!=''">
            o_price = #{oPrice},
        </if>
        <if test="oStatus!=null and oStatus!=''">
            o_status = #{oStatus},
        </if>
        <if test="oTime!=null and oTime!=''">
            o_time = #{oTime},
        </if>
        <if test="pTime!-null and pTime!=''">
            p_time =#{pTime}
        </if>
        where o_id = #{oId}
    </update>

    <delete id="deleteUserorder" parameterType="Userorder">
        DELETE FROM userorder where o_id = #{oId};
    </delete>

    <select id="queryOne" parameterType="Userorder" resultMap="userorderMap">
      SELECT o_id,u_id,t_id,o_price,o_status,o_time,p_time FROM userorder WHERE o_id = #{oId};
    </select>

    <select id="query" resultMap="userorderMap" parameterType="Userorder">
        SELECT o_id,u_id,t_id,o_price,o_status,o_time,p_time FROM userorder
        <where>
            <if test="oId!=null and oId!=''">
                o_id = #{oId}
            </if>
            <if test="uId!=null and uId!=''">
                and u_id =#{uId}
            </if>
            <if test="tId!=null and uId!=''">
                and t_id = #{tId}
            </if>
            <if test="oPrice!=null and oPrice!=''">
                and o_price = #{oPrice}
            </if>
            <if test="oStatus!=null and oStatus!=''">
                and o_status = #{oStatus}
            </if>
            <if test="oTime!=null and oTime!=''">
                and o_time = #{oTime}
            </if>
            <if test="pTime!-null and pTime!=''">
                and p_time =#{pTime}
            </if>
        </where>
    </select>

    <resultMap id="userorderMap" type="Userorder">
        <id property="oId" column="o_id"/>
        <result property="uId" column="u_id"/>
        <result property="tId" column="t_id"/>
        <result property="oPrice" column="o_price"/>
        <result property="oStatus" column="o_status"/>
        <result property="oTime" column="o_time"/>
        <result property="pTime" column="p_time"/>
    </resultMap>
</mapper>